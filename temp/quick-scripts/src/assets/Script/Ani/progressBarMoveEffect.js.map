{"version":3,"sources":["assets/Script/Ani/progressBarMoveEffect.js"],"names":["cc","Class","Component","properties","_callback","onLoad","isLerp","timer","lerpDuration","ratio","bar","node","getComponent","ProgressBar","updateProgress","callback","update","dt","progress","misc","lerp"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAILC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAE;AADH,GAJP;AAQLC,EAAAA,MARK,oBAQI;AACL,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,YAAL,GAAoB,GAApB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,GAAL,GAAW,KAAKC,IAAL,CAAUC,YAAV,CAAuBZ,EAAE,CAACa,WAA1B,CAAX;AACH,GAdI;AAgBLC,EAAAA,cAhBK,0BAgBUL,KAhBV,EAgBiBM,QAhBjB,EAgB2B;AAC5B,SAAKX,SAAL,GAAiBW,QAAjB;AACA,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKF,KAAL,GAAa,CAAb;AACA,SAAKD,MAAL,GAAc,IAAd;AACH,GArBI;AAuBLU,EAAAA,MAvBK,kBAuBEC,EAvBF,EAuBM;AACP,QAAI,CAAC,KAAKP,GAAN,IAAa,CAAC,KAAKJ,MAAvB,EAA+B;AAC3B;AACH;;AAED,SAAKC,KAAL,IAAcU,EAAd;;AACA,QAAI,KAAKV,KAAL,IAAc,KAAKC,YAAvB,EAAqC;AACjC,WAAKD,KAAL,GAAa,KAAKC,YAAlB;AACA,WAAKF,MAAL,GAAc,KAAd;AACH;;AAED,SAAKI,GAAL,CAASQ,QAAT,GAAoBlB,EAAE,CAACmB,IAAH,CAAQC,IAAR,CAAa,KAAKV,GAAL,CAASQ,QAAtB,EAAgC,KAAKT,KAArC,EAA4C,KAAKF,KAAL,GAAa,KAAKC,YAA9D,CAApB;AACA,SAAKJ,SAAL,IAAkB,KAAKA,SAAL,CAAe,KAAKM,GAAL,CAASQ,QAAxB,CAAlB;AACH;AApCI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\n// 进度条效果\ncc.Class({\n    extends: cc.Component,\n\n\n    properties: {\n        _callback: null\n    },\n\n    onLoad() {\n        this.isLerp = false;\n        this.timer = 0;\n        this.lerpDuration = 0.2;\n        this.ratio = 0;\n        this.bar = this.node.getComponent(cc.ProgressBar);\n    },\n\n    updateProgress(ratio, callback) {\n        this._callback = callback;\n        this.ratio = ratio;\n        this.timer = 0;\n        this.isLerp = true;\n    },\n\n    update(dt) {\n        if (!this.bar || !this.isLerp) {\n            return;\n        }\n\n        this.timer += dt;\n        if (this.timer >= this.lerpDuration) {\n            this.timer = this.lerpDuration;\n            this.isLerp = false;\n        }\n\n        this.bar.progress = cc.misc.lerp(this.bar.progress, this.ratio, this.timer / this.lerpDuration);\n        this._callback && this._callback(this.bar.progress);\n    }\n});"]}