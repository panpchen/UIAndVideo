{"version":3,"sources":["assets/Script/Net/NetManger.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;;AAEnG;IAAA;IA+CA,CAAC;IA9CQ,eAAI,GAAX,UACE,GAAW,EACX,MAAc,EACd,IAAW,EACX,eAAsB,EACtB,aAAoB;QAFpB,qBAAA,EAAA,WAAW;QACX,gCAAA,EAAA,sBAAsB;QACtB,8BAAA,EAAA,oBAAoB;QAEpB,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;QAClC,IAAI,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;QACxC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC;QACnB,GAAG,CAAC,kBAAkB,GAAG;YACvB,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC;YAC5D,IAAI,GAAG,CAAC,UAAU,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;gBAChE,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAC1C,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE;oBAC3B,aAAa,IAAI,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;iBACjD;qBAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE;oBAClC,eAAe,IAAI,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;iBACtD;aACF;QACH,CAAC,CAAC;QACF,6BAA6B;QAC7B,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAC,GAAG;YAC/B,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACd,CAAC,CAAC,CAAC;QACH,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,GAAG;YAChC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC;QACH,GAAG,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,GAAG;YAClC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC;QACH,2CAA2C;QAC3C,qBAAqB;QACrB,MAAM;QACN,8CAA8C;QAC9C,qBAAqB;QACrB,MAAM;QACN,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC5B,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QACzD,GAAG,CAAC,gBAAgB,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;QACzD,IAAI,CAAC,IAAI,EAAE;YACT,GAAG,CAAC,IAAI,EAAE,CAAC;SACZ;aAAM;YACL,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChB;IACH,CAAC;IACH,iBAAC;AAAD,CA/CA,AA+CC,IAAA;AA/CY,gCAAU","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nexport class NetManager {\n  static send(\n    url: string,\n    method: string,\n    data = null,\n    successCallback = null,\n    errorCallback = null\n  ) {\n    cc.log(\"请求数据\", url, method, data);\n    let xhr = cc.loader.getXMLHttpRequest();\n    xhr.timeout = 3000;\n    xhr.onreadystatechange = function () {\n      cc.log(\"连接状态：\", xhr.readyState, xhr.status, xhr.statusText);\n      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {\n        const response = JSON.parse(xhr.response);\n        if (response[\"code\"] == 500) {\n          errorCallback && errorCallback(response[\"msg\"]);\n        } else if (response[\"code\"] == 200) {\n          successCallback && successCallback(response[\"data\"]);\n        }\n      }\n    };\n    // xhr.responseType = \"json\";\n    xhr.addEventListener(\"load\", (evt) => {\n      cc.log(evt);\n    });\n    xhr.addEventListener(\"error\", (evt) => {\n      cc.error(evt);\n    });\n    xhr.addEventListener(\"timeout\", (evt) => {\n      cc.error(evt);\n    });\n    // xhr.addEventListener(\"abort\", (evt) => {\n    //     cc.error(evt);\n    // });\n    // xhr.addEventListener(\"progress\", (evt) => {\n    //     cc.error(evt);\n    // });\n    xhr.open(method, url, true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\n    if (!data) {\n      xhr.send();\n    } else {\n      xhr.send(data);\n    }\n  }\n}\n"]}