{"version":3,"sources":["assets/Script/UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport BaseUI from \"./UI/BaseUI\";\n\nconst { ccclass, property } = cc._decorator;\nexport const enum UIType {\n  MenuUI = \"MenuUI\",\n  SelectUI = \"SelectUI\",\n  ResultUI = \"ResultUI\",\n  AnswerUI = \"AnswerUI\",\n}\n\n@ccclass\nexport class UIManager extends cc.Component {\n\n  public static instance: UIManager = null;\n  private _allPanel = new Map<string, BaseUI>();\n\n  @property(cc.Node)\n  allUI: cc.Node[] = [];\n  @property(cc.Node)\n  fadeMask: cc.Node = null;\n\n  onLoad() {\n    UIManager.instance = this;\n    this._init();\n  }\n\n  _init() {\n    for (let i = 0; i < this.allUI.length; i++) {\n      const ui = this.allUI[i].getComponent(BaseUI);\n      this._allPanel.set(ui.node.name, ui);\n      ui.node.active = false;\n    }\n    this.showUI(UIType.MenuUI);\n  }\n\n  showUI(type: UIType, cb?: Function, ...args: any[]) {\n    if (this._allPanel.size == 0) {\n      return;\n    }\n    const panel: BaseUI = this._allPanel.get(type);\n    this.fadeMask.opacity = 0;\n\n    if (type == UIType.MenuUI\n      || type == UIType.AnswerUI) {\n      panel.show(args);\n      cb && cb(panel);\n      return;\n    }\n\n    cc.tween(this.fadeMask)\n      .to(0.45, { opacity: 255 }, { easing: \"fade\" })\n      .call(() => {\n        panel.show(args);\n        cb && cb(panel);\n      })\n      .to(0.15, { opacity: 0 }, { easing: \"fade\" })\n      .start();\n  }\n\n  hideUI(type: UIType) {\n    if (this._allPanel.size == 0) {\n      return;\n    }\n    this.fadeMask.opacity = 0;\n    const panel = this._allPanel.get(type);\n    panel.hide();\n  }\n\n  hideAll() {\n    if (this._allPanel.size == 0) {\n      return;\n    }\n\n    this.fadeMask.opacity = 0;\n    this._allPanel.forEach((value, key) => {\n      value.hide();\n    });\n  }\n}\n"]}