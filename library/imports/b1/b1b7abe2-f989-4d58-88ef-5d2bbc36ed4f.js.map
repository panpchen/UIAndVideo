{"version":3,"sources":["assets/Script/Ani/fillEffect.js"],"names":["cc","Class","Component","properties","_callback","onLoad","isLerp","timer","lerpDuration","ratio","bar","node","getComponent","Sprite","updateProgress","callback","update","dt","fillStart","misc","lerp"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAE;AADH,GAHP;AAOLC,EAAAA,MAPK,oBAOI;AACL,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,YAAL,GAAoB,GAApB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,GAAL,GAAW,KAAKC,IAAL,CAAUC,YAAV,CAAuBZ,EAAE,CAACa,MAA1B,CAAX;AACH,GAbI;AAeLC,EAAAA,cAfK,0BAeUL,KAfV,EAeiBM,QAfjB,EAe2B;AAC5B,SAAKX,SAAL,GAAiBW,QAAjB;AACA,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKF,KAAL,GAAa,CAAb;AACA,SAAKD,MAAL,GAAc,IAAd;AACH,GApBI;AAsBLU,EAAAA,MAtBK,kBAsBEC,EAtBF,EAsBM;AACP,QAAI,CAAC,KAAKP,GAAN,IAAa,CAAC,KAAKJ,MAAvB,EAA+B;AAC3B;AACH;;AAED,SAAKC,KAAL,IAAcU,EAAd;;AACA,QAAI,KAAKV,KAAL,IAAc,KAAKC,YAAvB,EAAqC;AACjC,WAAKD,KAAL,GAAa,KAAKC,YAAlB;AACA,WAAKF,MAAL,GAAc,KAAd;AACH;;AAED,SAAKI,GAAL,CAASQ,SAAT,GAAqBlB,EAAE,CAACmB,IAAH,CAAQC,IAAR,CAAa,KAAKV,GAAL,CAASQ,SAAtB,EAAiC,KAAKT,KAAtC,EAA6C,KAAKF,KAAL,GAAa,KAAKC,YAA/D,CAArB;AACA,SAAKJ,SAAL,IAAkB,KAAKA,SAAL,CAAe,KAAKM,GAAL,CAASQ,SAAxB,CAAlB;AACH;AAnCI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\n// 缓动填充效果\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _callback: null\n    },\n\n    onLoad() {\n        this.isLerp = false;\n        this.timer = 0;\n        this.lerpDuration = 0.2;\n        this.ratio = 0;\n        this.bar = this.node.getComponent(cc.Sprite);\n    },\n\n    updateProgress(ratio, callback) {\n        this._callback = callback;\n        this.ratio = ratio;\n        this.timer = 0;\n        this.isLerp = true;\n    },\n\n    update(dt) {\n        if (!this.bar || !this.isLerp) {\n            return;\n        }\n\n        this.timer += dt;\n        if (this.timer >= this.lerpDuration) {\n            this.timer = this.lerpDuration;\n            this.isLerp = false;\n        }\n\n        this.bar.fillStart = cc.misc.lerp(this.bar.fillStart, this.ratio, this.timer / this.lerpDuration);\n        this._callback && this._callback(this.bar.fillStart);\n    }\n});"]}